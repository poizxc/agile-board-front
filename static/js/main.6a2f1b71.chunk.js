(this["webpackJsonpagile-board-front"]=this["webpackJsonpagile-board-front"]||[]).push([[0],{294:function(e,t,a){e.exports=a(321)},321:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(11),s=a.n(i),c=a(357),o=a(61),l=a(40),u=a.n(l),d=a(83),m=a(50),p=a(71),f=a(39),b=a(349),h=a(350),g=a(351),v=a(352),E=a(181),O=a(105),j=a(72),x=a.n(j),y=a(281),I=a(347),w=a(348),D=a(272),C=Object(D.a)((function(){return{column:{padding:15,width:"31.5%"}}})),S=function(e){var t=e.column,a=e.children,n=C();return r.a.createElement(O.c,{droppableId:t},(function(e){return r.a.createElement(y.a,Object.assign({elevation:8,ref:e.innerRef},e.droppableProps,{key:t,className:n.column}),r.a.createElement(E.a,null,r.a.createElement(I.a,{align:"center"},t),r.a.createElement(w.a,{variant:"fullWidth"})),a(),e.placeholder)}))},k=function(e){return e.reduce((function(e,t){return e[t.status]=[].concat(Object(d.a)(e[t.status]),[t]),e}),{TODO:[],PENDING:[],CLOSED:[]})},T=function(e,t,a,n){var r=a.droppableId,i=a.index,s=t.droppableId,c=t.index,l=Object(d.a)(e[s]);if(s!==r){var u,p=Object(d.a)(e[r]),b=l.splice(l.findIndex((function(e){return e.uuid===n})),1),h=Object(f.a)(b,1)[0];return p.splice(i,0,Object(m.a)({},h,{status:r})),Object(m.a)({},e,(u={},Object(o.a)(u,s,l),Object(o.a)(u,r,p),u))}var g=l.splice(c,1),v=Object(f.a)(g,1)[0];return l.splice(i,0,v),Object(m.a)({},e,Object(o.a)({},s,l))},N=function(e,t){if(!t)return!1;var a="PENDING"===e.droppableId&&"TODO"===t.droppableId;return!("CLOSED"===e.droppableId&&"CLOSED"!==t.droppableId)&&!a},M="/api/v1/issues",W=function(e){var t=e.issue,a=e.index,n=e.setIssueModal,i=e.handleDelete,s=e.column,c=function(){n({opened:!0,issue:t,openedForColumn:s})};return r.a.createElement(O.b,{draggableId:t.uuid,index:a},(function(e,a){return r.a.createElement(E.a,{mb:1},r.a.createElement(y.a,Object.assign({elevation:6,ref:e.innerRef},e.draggableProps,e.dragHandleProps),r.a.createElement(E.a,{p:3},r.a.createElement(I.a,{variant:"h6",align:"center"},t.title),r.a.createElement(I.a,{variant:"body2"}," ",t.description," "),r.a.createElement(w.a,{variant:"fullWidth",style:{marginBottom:10,marginTop:10}}),r.a.createElement(I.a,{variant:"body2"},"Estimate: ",t.estimate," "),r.a.createElement(E.a,{margin:1,display:"flex",justifyContent:"space-around",flexDirection:"row"},r.a.createElement(b.a,{onClick:c,size:"small",color:"primary",variant:"contained"},r.a.createElement(h.a,{fontSize:"small"},"edit")),r.a.createElement(b.a,{onClick:function(){return i(t.uuid,s)},size:"small",color:"secondary",variant:"contained"},r.a.createElement(h.a,{fontSize:"small"},"delete"))))))}))},B=r.a.createContext(),L=function(e){var t=e.children,a=Object(n.useState)(!1),i=Object(f.a)(a,2),s=i[0],c=i[1],o=Object(n.useState)(""),l=Object(f.a)(o,2),u=l[0],d=l[1],m=Object(n.useState)("error"),p=Object(f.a)(m,2),b=p[0],h=p[1];return r.a.createElement(B.Provider,{value:{open:s,message:u,severity:b,showMessage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";c(!0),d(e),h(t)},hideMessage:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];c(!1),d("message"),h("error")}}},t)},P=Object(D.a)((function(e){return{container:{padding:0,paddingBottom:50,marginBottom:20,marginTop:40,position:"relative",overflowX:"auto",overflowY:"hidden"},tableWrapper:{minWidth:720,paddingLeft:8,paddingRight:8,margin:0,flexWrap:"nowrap",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"stretch"},addButton:{position:"absolute",bottom:0,right:0}}})),R=function(e){var t=e.setIssueModal,a=e.setIssues,i=e.issues,s=e.isLoading,c=e.isError,o=e.handleDelete,l=P(),d=Object(n.useContext)(B).showMessage,f=function(){var e=Object(p.a)(u.a.mark((function e(t){var n,r,s,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.draggableId,r=t.source,s=t.destination,c=Object(m.a)({},i),!N(r,s)){e.next=18;break}return e.prev=4,o=T(i,r,s,n),a(o),e.next=9,x.a.patch("".concat(M,"/").concat(n),{status:s.droppableId});case 9:e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),d(e.t0.message,"error"),console.error(e.t0),a(c);case 16:e.next=19;break;case 18:d("Issues Cannot Be Moved Back","warning");case 19:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(g.a,{className:l.container,maxWidth:"md"},s?r.a.createElement(v.a,null):r.a.createElement(O.a,{onDragEnd:f},r.a.createElement(E.a,{className:l.tableWrapper},c?"Cannot fetch Issue Data :/":r.a.createElement(r.a.Fragment,null,Object.keys(i).map((function(e){return r.a.createElement(S,{key:e,column:e},(function(){return i[e].map((function(a,n){return r.a.createElement(W,{setIssueModal:t,key:a.uuid,index:n,handleDelete:o,issue:a,column:e})}))}))})),r.a.createElement(b.a,{size:"small",color:"primary",variant:"contained",className:l.addButton,onClick:function(){t({opened:!0})}},r.a.createElement(h.a,{fontSize:"small"},"add"))))))},z=a(184),q=a(280),V=a(353),F=a(110),G=F.b().shape({title:F.c().min(2,"Too Short!").required("Required"),description:F.c().min(2,"Too Short!").required("Required"),estimate:F.a().integer().min(1).required("Required"),status:F.c().oneOf(["TODO","PENDING","CLOSED"])}),J=function(e){var t=e.initialData,a=e.handleOperation,n=Object(q.a)({initialValues:Object(m.a)({status:"TODO"},t),onSubmit:function(e){a(e)},validationSchema:G}),i=n.handleSubmit,s=n.errors,c=n.values,o=n.handleChange;return r.a.createElement("form",{onSubmit:i},r.a.createElement(E.a,{display:"flex",flexDirection:"column",alignItems:"flex-end"},r.a.createElement(V.a,{error:s.title&&!0,margin:"normal",id:"title",label:"Title",name:"title",type:"text",fullWidth:!0,variant:"outlined",onChange:o,defaultValue:c.title,helperText:s.title}),r.a.createElement(V.a,{error:s.description&&!0,margin:"normal",id:"description",name:"description",fullWidth:!0,variant:"outlined",multiline:!0,rows:2,rowsMax:5,label:"Description",type:"text",onChange:o,defaultValue:c.description,helperText:s.description&&s.description}),r.a.createElement(V.a,{error:s.estimate&&!0,margin:"normal",variant:"outlined",id:"estimate",name:"estimate",label:"Estimate",fullWidth:!0,type:"number",onChange:o,defaultValue:c.estimate,helperText:s.estimate&&s.estimate}),r.a.createElement(V.a,{error:s.status&&!0,margin:"normal",id:"status",label:"Status",name:"status",disabled:!0,type:"select",fullWidth:!0,variant:"outlined",onChange:o,defaultValue:c.status,helperText:s.status&&s.status}),r.a.createElement(b.a,{type:"submit",variant:"contained",color:"primary"},r.a.createElement(h.a,null,"save_alt"))))},A=function(e){var t=e.modalData,a=t.issue,n=t.opened,i=e.handleClose,s=e.handleCreate,c=e.handleEdit,o=P();return r.a.createElement(z.a,{className:o.modal,disableAutoFocus:!0,open:n,onClose:i,"aria-labelledby":"form-Modal-title"},r.a.createElement(g.a,{style:{outline:"none"},maxWidth:"sm",fixed:!0},r.a.createElement(y.a,{elevation:24},r.a.createElement(E.a,{bgcolor:"white",padding:3,marginTop:10},r.a.createElement(E.a,{bgcolor:"primary.main",color:"primary.contrastText",borderRadius:2,p:1,mb:1},r.a.createElement(I.a,{align:"center"},a?"Edit Issue":"Create Issue")),a?r.a.createElement(J,{initialData:a,handleOperation:c}):r.a.createElement(J,{initialData:!0,handleOperation:s})))))},H=function(){var e=r.a.useState({opened:!1}),t=Object(f.a)(e,2),a=t[0],i=t[1],s=function(){var e=Object(n.useState)({TODO:[],PENDING:[],CLOSED:[]}),t=Object(f.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(!1),s=Object(f.a)(i,2),c=s[0],o=s[1],l=Object(n.useState)(!1),d=Object(f.a)(l,2),m=d[0],b=d[1],h=Object(n.useContext)(B).showMessage;return Object(n.useEffect)((function(){(function(){var e=Object(p.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),b(!1),e.prev=2,e.next=5,x.a.get(M);case 5:t=e.sent,a=t.data,r(k(a)),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),h(e.t0.message),b(!0),console.error(e.t0);case 15:o(!1);case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}})()()}),[]),{issues:a,setIssues:r,isLoading:c,isError:m}}(),c=s.isLoading,l=s.isError,b=s.issues,h=s.setIssues,g=Object(n.useContext)(B).showMessage,v=function(){var e=Object(p.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.post(M,t);case 3:a=e.sent,n=a.data,h(Object(m.a)({},b,{TODO:[].concat(Object(d.a)(b.TODO),[n])})),j(),g("Successfully Created Issue","success"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),g(e.t0.message),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(p.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.put("".concat(M,"/").concat(t.uuid),{title:t.title,description:t.description,status:t.status,estimate:t.estimate});case 3:a=Object(d.a)(b[t.status]),n=a.findIndex((function(e){return e.uuid===t.uuid})),a[n]=t,h(Object(m.a)({},b,Object(o.a)({},t.status,a))),j(),g("Successfully Edited Issue","success"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),g(e.t0.message),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(p.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.delete("".concat(M,"/").concat(t));case 3:h(Object(m.a)({},b,Object(o.a)({},a,b[a].filter((function(e){return e.uuid!==t}))))),g("Successfully Deleted Issue","success"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),g(e.t0.message),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),j=function(){i({opened:!1})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{setIssueModal:i,isLoading:c,isError:l,issues:b,handleDelete:O,setIssues:h}),r.a.createElement(A,{modalData:a,handleClose:j,handleEdit:E,handleCreate:v}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=a(359),Y=a(358),$=a(360),_=(0,a(53).makeStyles)({message:{pointerEvents:"none"}}),K=function(){var e=Object(n.useContext)(B),t=e.open,a=e.severity,i=e.message,s=e.hideMessage,c=_();return Object(n.useEffect)((function(){var e=setInterval((function(){s()}),3e3);return function(){return clearInterval(e)}}),[s]),r.a.createElement(X.a,{className:c.message,anchorOrigin:{vertical:"bottom",horizontal:"right"},TransitionComponent:function(e){return r.a.createElement(Y.a,Object.assign({},e,{direction:"left"}))},open:t},r.a.createElement($.a,{severity:a},"string"===typeof i?i:JSON.stringify(i)))},Q=function(){return r.a.createElement(y.a,{variant:"elevation"},r.a.createElement(E.a,{p:2},r.a.createElement(I.a,{variant:"h4",align:"center"},"Recruitment Task - Agile Board")))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,null),r.a.createElement(L,null,r.a.createElement(Q,null),r.a.createElement(H,null),r.a.createElement(K,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[294,1,2]]]);
//# sourceMappingURL=main.6a2f1b71.chunk.js.map